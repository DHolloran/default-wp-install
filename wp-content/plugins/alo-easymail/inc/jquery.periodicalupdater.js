(function(b){var a=function(d){try{}catch(c){}};b.PeriodicalUpdater=function(d,c,e,h){var r=jQuery.extend(true,{url:d,cache:false,method:"GET",data:"",minTimeout:1000,maxTimeout:8000,multiplier:2,maxCalls:0,autoStop:0},c);var i=null;var m=r.minTimeout;var q=r.maxCalls;var k=r.autoStop;var l=0;var n=0;var o=q;var j=function(v){if(i!=null){clearTimeout(i)}m=v;a("resetting timer to "+m+".");i=setTimeout(f,m)};var t=function(){if(r.multiplier>=1){before=m;m=m*r.multiplier;if(m>r.maxTimeout){m=r.maxTimeout}after=m;a("adjusting timer from "+before+" to "+after+".");j(m)}};var g=jQuery.extend(true,{},r);if(r.type&&!g.dataType){g.dataType=r.type}if(r.sendData){g.data=r.sendData}g.type=r.method;g.ifModified=true;var s={restart:function(){q=o;l=0;j(m);return},stop:function(){q=-1;return}};function f(){var v=jQuery.extend(true,{},g);if(typeof(c.data)=="function"){v.data=c.data();if(v.data){if(typeof(v.data)=="number"){v.data=v.data.toString()}}}if(q==0){b.ajax(v)}else{if(q>0&&l<q){b.ajax(v);l++}}}var p=null;var u=null;g.success=function(v){a("Successful run! (In 'success')");p=v};g.complete=function(w,v){if(q==-1){return}if(v=="success"||v=="notmodified"){var x=b.trim(w.responseText);if(x=="STOP_AJAX_CALLS"){s.stop();return}if(u==x){if(k>0){n++;if(n==k){s.stop();if(h){h(n)}return}}t()}else{n=0;j(r.minTimeout);u=x;if(p==null){p=x}if((g.dataType==="json")&&(typeof(p)==="string")&&(v=="success")){p=JSON.parse(p)}if(r.success){r.success(p,v,w,s)}if(e){e(p,v,w,s)}}}p=null};g.error=function(v,w){if(w!="notmodified"){u=null;j(r.minTimeout)}if(r.error){r.error(v,w)}};b(function(){j(m)});return s}})(jQuery);