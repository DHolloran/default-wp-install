jQuery(document).ready(function(a){if(easymailJs.updaterLibrary=="periodicalupdater"){jQuery(".easymail-recipients-pause-loop").remove();jQuery(".easymail-recipients-restart-loop").remove()}jQuery.fn.easymailStartRecipientsLoop=function(c){var b=false;if(c==true){b="yes"}switch(easymailJs.updaterLibrary){case"periodicalupdater":jQuery.PeriodicalUpdater(easymailJs.em_ajaxurl,{method:"post",data:{action:easymailJs.action,newsletter:easymailJs.newsletter,_ajax_nonce:easymailJs.nonce,txt_success_added:easymailJs.txt_success_added,txt_success_sent:easymailJs.txt_success_sent,sendnow:b},minTimeout:100,maxTimeout:1000,multiplier:2,type:"json",maxCalls:0,autoStop:3},function(e,g,f,d){jQuery(this).easymailReturnFromUpdate(e,b,d)});break;default:jQuery("#ajaxloop-response").smartupdater({url:easymailJs.em_ajaxurl,data:{action:easymailJs.action,newsletter:easymailJs.newsletter,_ajax_nonce:easymailJs.nonce,txt_success_added:easymailJs.txt_success_added,txt_success_sent:easymailJs.txt_success_sent,sendnow:b},type:"POST",dataType:"json",minTimeout:100},function(d){jQuery(this).easymailReturnFromUpdate(d,b,false)})}jQuery(".easymail-recipients-start-loop").hide();jQuery(".easymail-recipients-start-loop-and-send").hide();jQuery(".easymail-recipients-pause-loop").show();jQuery(".easymail-recipients-restart-loop").hide()};jQuery.fn.easymailReturnFromUpdate=function(e,c,d){jQuery("#alo-easymail-bar-outer").show();jQuery("#alo-easymail-bar-inner").css("width",e.perc+"%");jQuery("#ajaxloop-response").empty();if(e.n_done>=e.n_tot){var b=(c=="yes")?easymailJs.txt_success_sent:easymailJs.txt_success_added;jQuery("#ajaxloop-response").html("<p>"+b+"!</p>");jQuery("#alo-easymail-bar-inner").addClass("stopped");jQuery(".easymail-recipients-start-loop").hide();jQuery(".easymail-recipients-start-loop-and-send").hide();jQuery(".easymail-recipients-pause-loop").hide();jQuery(".easymail-recipients-restart-loop").hide();jQuery(this).easymailUpdateColumStatus(easymailJs.newsletter);switch(easymailJs.updaterLibrary){case"periodicalupdater":if(d){d.stop()}break;default:jQuery("#ajaxloop-response").smartupdaterStop()}}else{jQuery("#ajaxloop-response").html(e.perc+"% <small>("+e.n_done+"/"+e.n_tot+")</small>")}};jQuery.fn.easymailSendMailTest=function(){var b=jQuery("#easymail-testmail").val();jQuery("#easymail-testmail-yes,#easymail-testmail-no").hide();jQuery("#easymail-testmail-loading").show();jQuery.post(easymailJs.ajaxurl,{action:"easymail_send_mailtest",newsletter:easymailJs.newsletter,_ajax_nonce:easymailJs.nonce,email:b},function(c){jQuery("#easymail-testmail-loading").hide();if(c=="yes"){jQuery("#easymail-testmail-yes").show()}else{jQuery("#easymail-testmail-no").show()}})};jQuery.fn.easymailUpdateColumStatus=function(b){var c={action:"alo_easymail_update_column_status",post_id:b};jQuery.post(easymailJs.ajaxurl,c,function(d){jQuery("#alo-easymail-column-status-"+b,window.parent.document).html(d)});return false};jQuery(".easymail-send-testmail").live("click",function(){jQuery(this).easymailSendMailTest()});jQuery(".easymail-recipients-start-loop").live("click",function(){jQuery(this).easymailStartRecipientsLoop(false)});jQuery(".easymail-recipients-start-loop-and-send").live("click",function(){jQuery(this).easymailStartRecipientsLoop(true)});jQuery(".easymail-recipients-close-popup").live("click",function(){var b=jQuery(this).attr("rel");jQuery(this).easymailUpdateColumStatus(b);setTimeout(function(){self.parent.tb_remove()},100)});jQuery(".easymail-recipients-restart-loop").live("click",function(){switch(easymailJs.updaterLibrary){case"periodicalupdater":break;default:jQuery("#ajaxloop-response").smartupdaterRestart()}jQuery(".easymail-recipients-pause-loop").show();jQuery(".easymail-recipients-restart-loop").hide();jQuery("#alo-easymail-bar-inner").removeClass("stopped");return false});jQuery(".easymail-recipients-pause-loop").live("click",function(){switch(easymailJs.updaterLibrary){case"periodicalupdater":break;default:jQuery("#ajaxloop-response").smartupdaterStop()}jQuery(".easymail-recipients-restart-loop").show();jQuery(".easymail-recipients-pause-loop").hide();jQuery("#alo-easymail-bar-inner").addClass("stopped");return false})});