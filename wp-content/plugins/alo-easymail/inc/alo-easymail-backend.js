jQuery(document).ready(function(b){if(easymailJs.pagenow=="post-new.php"||easymailJs.pagenow=="post.php"){jQuery("#easymail-filter-ul-languages").hide();jQuery("#easymail-filter-ul-lists").hide();jQuery("#easymail-filter-ul-roles").hide();jQuery(".easymail-filter-subscribers-by-languages").live("click",function(){jQuery("#easymail-filter-ul-languages").toggle();return false});jQuery(".easymail-filter-subscribers-by-lists").live("click",function(){jQuery("#easymail-filter-ul-lists").toggle();return false});jQuery(".easymail-filter-regusers-by-roles").live("click",function(){jQuery("#easymail-filter-ul-roles").toggle();return false});jQuery("#easymail-recipients-all-subscribers").live("click",function(){var c=jQuery(this).is(":checked");jQuery(".check_list").prop("checked",c)});jQuery("#easymail-recipients-all-regusers").live("click",function(){var c=jQuery(this).is(":checked");jQuery(".check_role").prop("checked",c)});jQuery("#easymail-theme-select-preview").live("click",function(){var c=jQuery("#easymail-theme-select").val();if(c!=""){jQuery.fn.easymailThemePreviewPopup(c)}return false})}if(easymailJs.pagenow=="edit.php"){jQuery(".easymail-column-short-summary").hide();jQuery(".easymail-toggle-short-summary").live("click",function(){var c=jQuery(this).attr("rel");jQuery("#easymail-column-short-summary-"+c).toggle();return false});jQuery(".easymail-refresh-column-status").live("click",function(){var c=jQuery(this).attr("rel");var d={action:"alo_easymail_update_column_status",post_id:c};jQuery("#easymail-refresh-column-status-loading-"+c).show();jQuery("#alo-easymail-column-status-"+c).hide();jQuery.post(easymailJs.ajaxurl,d,function(e){jQuery("#easymail-refresh-column-status-loading-"+c).hide();jQuery("#alo-easymail-column-status-"+c).html(e).show()});return false});jQuery(".easymail-pause-column-status").live("click",function(){})}if(easymailJs.pagenow=="edit.php"&&easymailJs.screenID=="alo-easymail/alo-easymail_subscribers"){jQuery(".easymail-subscriber-edit-inline").live("click",function(){var e=jQuery(this).attr("rel");var c=jQuery.trim(jQuery("tr#subscriber-row-"+e+" th.subscriber-row-index").html());var d={action:"alo_easymail_subscriber_edit_inline",inline_action:"edit",subscriber:e,row_index:c,_ajax_nonce:easymailJs.nonce};jQuery("#easymail-subscriber-edit-inline_"+e).hide();jQuery("#easymail-subscriber-delete_"+e).hide();jQuery("#easymail-subscriber-delete-and-unsubscribe_"+e).hide();jQuery("#easymail-subscriber-"+e+"-actions-loading").show();jQuery.post(easymailJs.ajaxurl,d,function(f){jQuery("#easymail-subscriber-"+e+"-actions-loading").hide();if(f=="-1"){alert("ERROR")}else{jQuery("tr#subscriber-row-"+e).html(f)}});return false});jQuery(".easymail-subscriber-edit-inline-save").live("click",function(){var d=jQuery(this).attr("rel");var i=jQuery.trim(jQuery("tr#subscriber-row-"+d+" th.subscriber-row-index").html());var j=jQuery("#subscriber-"+d+"-email-new").val();var c=jQuery("#subscriber-"+d+"-name-new").val();var e=jQuery("#subscriber-"+d+"-lang-new").val();var g=(jQuery("#subscriber-"+d+"-active-new").is(":checked"))?1:0;var f=new Array();for(k in alo_cf_array){f[k]=jQuery("#subscriber-"+d+"-"+alo_cf_array[k]+"-new").val()}var l="";jQuery(".subscriber-"+d+"-lists-new:checked").each(function(){l=l+jQuery(this).val()+","});var h={action:"alo_easymail_subscriber_edit_inline",inline_action:"save",subscriber:d,new_name:c,new_email:j,new_active:g,new_lang:e,new_lists:l,row_index:i,_ajax_nonce:easymailJs.nonce};for(k in f){h["new_"+alo_cf_array[k]]=f[k]}jQuery("#easymail-subscriber-edit-inline-save_"+d).hide();jQuery("#easymail-subscriber-edit-inline-cancel_"+d).hide();jQuery("#easymail-subscriber-"+d+"-actions-loading").show();jQuery.post(easymailJs.ajaxurl,h,function(m){jQuery("#easymail-subscriber-"+d+"-actions-loading").hide();switch(m){case"-1":alert("ERROR");break;case"-error-email-is-not-valid":jQuery("#easymail-subscriber-edit-inline-save_"+d).show();jQuery("#easymail-subscriber-edit-inline-cancel_"+d).show();alert(easymailJs.errEmailNotValid);break;case"-error-name-is-empty":jQuery("#easymail-subscriber-edit-inline-save_"+d).show();jQuery("#easymail-subscriber-edit-inline-cancel_"+d).show();alert(easymailJs.errNameIsBlank);break;case"-error-email-already-subscribed":jQuery("#easymail-subscriber-edit-inline-save_"+d).show();jQuery("#easymail-subscriber-edit-inline-cancel_"+d).show();alert(easymailJs.errEmailAlreadySubscribed);break;default:jQuery("tr#subscriber-row-"+d).html(m)}});return false});jQuery(".easymail-subscriber-edit-inline-cancel").live("click",function(){var e=jQuery(this).attr("rel");var c=jQuery.trim(jQuery("tr#subscriber-row-"+e+" th.subscriber-row-index").html());var d={action:"alo_easymail_subscriber_edit_inline",inline_action:"cancel",subscriber:e,row_index:c,_ajax_nonce:easymailJs.nonce};jQuery("#easymail-subscriber-edit-inline-save_"+e).hide();jQuery("#easymail-subscriber-edit-inline-cancel_"+e).hide();jQuery("#easymail-subscriber-delete-and-unsubscribe_"+e).hide();jQuery("#easymail-subscriber-"+e+"-actions-loading").show();jQuery.post(easymailJs.ajaxurl,d,function(f){jQuery("#easymail-subscriber-"+e+"-actions-loading").hide();if(f=="-1"){alert("ERROR")}else{jQuery("tr#subscriber-row-"+e).html(f)}});return false});jQuery(".easymail-subscriber-delete").live("click",function(){var f=jQuery(this).attr("rel");var d=jQuery.trim(jQuery("tr#subscriber-row-"+f+" th.subscriber-row-index").html());var c;if(jQuery(this).hasClass("and-unsubscribe")){c=1}else{c=0}if(c==1){if(!confirm(easymailJs.confirmDelSubscriberAndUnsubscribe)){return false}}else{if(!confirm(easymailJs.confirmDelSubscriber)){return false}}var e={action:"alo_easymail_subscriber_edit_inline",inline_action:"delete",subscriber:f,row_index:d,_ajax_nonce:easymailJs.nonce,to_unsubscribe:c};jQuery("#easymail-subscriber-edit-inline_"+f).hide();jQuery("#easymail-subscriber-delete_"+f).hide();jQuery("#easymail-subscriber-delete-and-unsubscribe_"+f).hide();jQuery("#easymail-subscriber-"+f+"-actions-loading").show();jQuery.post(easymailJs.ajaxurl,e,function(g){jQuery("#easymail-subscriber-"+f+"-actions-loading").hide();if(g=="-1"){alert("ERROR")}else{if(g=="-ok-deleted"){jQuery("tr#subscriber-row-"+f).animate({backgroundColor:"#ff0000"},500).fadeOut("fast",function(){jQuery(this).remove()})}}});return false});var a=".subscriber-email-new, .subscriber-name-new, .subscriber-active-new, .subscriber-lists-new";for(k in alo_cf_array){a=a+", .subscriber-"+alo_cf_array[k]+"-new"}jQuery(a).live("keypress",function(c){if(c.keyCode==13){return false}})}jQuery.fn.easymailReportPopup=function(c,e,d){tb_show(easymailJs.reportPopupTitle,c+"&newsletter="+e+"&lang="+d+"&TB_iframe=true&height=570&width=800",false);return false};jQuery.fn.easymailRecipientsGenPopup=function(c,e,d){tb_show(easymailJs.subscribersPopupTitle,c+"&newsletter="+e+"&lang="+d+"&action=open_popup&TB_iframe=true&height=400&width=700&modal=true",false);return false};jQuery.fn.easymailThemePreviewPopup=function(c){window.open(easymailJs.themePreviewUrl+c);return false};jQuery.fn.easymailPausePlay=function(c,d){var e={action:"alo_easymail_pauseplay_column_status",post_id:c,button:d};jQuery("#easymail-refresh-column-status-loading-"+c).show();jQuery("#alo-easymail-column-status-"+c).hide();jQuery.post(easymailJs.ajaxurl,e,function(f){jQuery("#easymail-refresh-column-status-loading-"+c).hide();jQuery("#alo-easymail-column-status-"+c).html(f).show()});return false}});