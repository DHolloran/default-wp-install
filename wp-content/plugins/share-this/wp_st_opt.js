if(!window.console||!console.firebug){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}var startPos=1;var defaultServices='"facebook","twitter","linkedin","email","sharethis"';var makeTagsEnabled=false;function st_log(){if($("#st_copynshare").attr("checked")){var a=$("#st_pkey").val();if(a==""){if($("#st_pkey_hidden").val()!=""){a=$("#st_pkey_hidden").val()}}_gaq.push(["_trackEvent","WordPressPlugin","ClosedLoopBetaPublishers",a])}_gaq.push(["_trackEvent","WordPressPlugin","ConfigOptionsUpdated"]);_gaq.push(["_trackEvent","WordPressPlugin","Type_"+$("#st_current_type").val()]);if($("#get5x").attr("checked")){_gaq.push(["_trackEvent","WordPressPlugin","Version_5x"])}else{if($("#get4x").attr("checked")){_gaq.push(["_trackEvent","WordPressPlugin","Version_4x"])}}}function getStartPos(){var a=[];a._large=1;a._hcount=2;a._vcount=3;a.classic=4;a.chicklet=5;a.chicklet2=6;a._buttons=7;if(typeof(a[st_current_type])!=="undefined"){startPos=a[st_current_type]}}jQuery(document).ready(function(){getStartPos();if(/updated=true/.test(document.location.href)){$("#st_updated").show()}jQuery("#carousel").jcarousel({size:7,scroll:1,visible:1,start:startPos,wrap:"both",itemFirstInCallback:{onAfterAnimation:carDoneCB},itemFallbackDimension:460});$("#st_services").bind("keyup",function(){clearTimeout(stkeytimeout);stkeytimeout=setTimeout(function(){makeTags()},500)});$("#st_pkey").bind("keyup",function(){clearTimeout(stpkeytimeout);stpkeytimeout=setTimeout(function(){makeHeadTag()},500)});$("#st_widget").bind("keyup",function(){checkCopyNShare()});var f=$("#st_services").val();svc=f.split(",");for(var e=0;e<svc.length;e++){if(svc[e]=="fblike"){$("#st_fblike").attr("checked","checked")}else{if(svc[e]=="plusone"){$("#st_plusone").attr("checked","checked")}else{if(svc[e]=="pinterest"){$("#st_pinterest").attr("checked","checked")}}}}var b=$("#st_widget").val();if(b.match(/new sharethis\.widgets\.serviceWidget/)){$("#st_sharenow").attr("checked","checked")}if(b.match(/new sharethis\.widgets\.hoverbuttons/)){$("#st_hoverbar").attr("checked","checked")}checkCopyNShare();var a=b.match(/"style": "(\d)*"/);if(a!=null&&typeof(a[1])!="undefined"){$("ul#themeList").find("li.selected").removeClass("selected");$.each($("ul#themeList").find("li"),function(h,j){if($(j).attr("data-value")==a[1]){$(j).addClass("selected")}})}var d=$("#st_tags").val();var g=d.match(/st_via='(\w*)'/);if(g!=null&&typeof(g[1])!="undefined"){$("#st_via").val(g[1])}var c=d.match(/st_username='(\w*)'/);if(c!=null&&typeof(c[1])!="undefined"){$("#st_related").val(c[1])}$("#st_fblike").bind("click",function(){if($("#st_fblike").attr("checked")){if($("#st_services").val().indexOf("fblike")==-1){var j=$("#st_services").val().indexOf("plusone");if(j==-1){$("#st_services").val($("#st_services").val()+",fblike")}else{var h=$("#st_services").val();if(j==0){$("#st_services").val("fblike,"+h.substr(j))}else{$("#st_services").val(h.substr(0,j-1)+",fblike"+h.substr(j-1))}}}}else{var j=$("#st_services").val().indexOf("fblike");if(j!=-1){var h=$("#st_services").val();if(j==0){$("#st_services").val(h.substr(j+7))}else{$("#st_services").val(h.substr(0,j-1)+h.substr(j+6))}}}clearTimeout(stpkeytimeout);stpkeytimeout=setTimeout(function(){makeTags()},500)});$("#st_plusone").bind("click",function(){if($("#st_plusone").attr("checked")){if($("#st_services").val().indexOf("plusone")==-1){$("#st_services").val($("#st_services").val()+",plusone")}}else{var j=$("#st_services").val().indexOf("plusone");if(j!=-1){var h=$("#st_services").val();if(j==0){$("#st_services").val(h.substr(j+8))}else{$("#st_services").val(h.substr(0,j-1)+h.substr(j+7))}}}clearTimeout(stpkeytimeout);stpkeytimeout=setTimeout(function(){makeTags()},500)});$("#st_pinterest").bind("click",function(){if($("#st_pinterest").attr("checked")){if($("#st_services").val().indexOf("pinterest")==-1){$("#st_services").val($("#st_services").val()+",pinterest")}}else{var j=$("#st_services").val().indexOf("pinterest");if(j!=-1){var h=$("#st_services").val();if(j==0){$("#st_services").val(h.substr(j+10))}else{$("#st_services").val(h.substr(0,j-1)+h.substr(j+9))}}}clearTimeout(stpkeytimeout);stpkeytimeout=setTimeout(function(){makeTags()},500)});$("#st_hoverbar").bind("click",function(){generateHoverbar("left")});$("#st_sharenow").bind("click",function(){generateShareNow()});$("#st_copynshare").bind("click",function(){generateCopyNShare()});$("#st_via").bind("keyup",function(){makeTags()});$("#st_related").bind("keyup",function(){makeTags()});$(".registerLink").live("click",function(){createOverlay()});$("ul#themeList li").click(function(){$("ul#themeList").find("li.selected").removeClass("selected");$(this).addClass("selected");updateShareNowStyle($(this).attr("data-value"))})});var stkeytimeout=null;var stpkeytimeout=null;function checkCopyNShare(){var a=$("#st_widget").val();var b=$("#st_pkey").val();if(b==""){if($("#st_pkey_hidden").val()!=""){b=$("#st_pkey_hidden").val()}}if(a.match(/doNotHash:(\s)?false/)){$("#st_copynshare").attr("checked","checked");$(".cnsRegister").hide();$(".cnsCheck").show()}else{if((/[^rp\.\-]\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/).test(b)||(/[^rp\.\-]\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/).test(a)){$(".cnsRegister").hide();$(".cnsCheck").show()}else{$(".cnsRegister").show();$(".cnsCheck").hide()}}}function getCopyNShare(){if($("#st_copynshare").attr("checked")){return", hashAddressBar: true, doNotCopy: false, doNotHash: false"}else{return""}}function generateCopyNShare(){var b=$("#st_pkey").val();if(b==""){if($("#st_pkey_hidden").val()!=""){b=$("#st_pkey_hidden").val()}}var a=$("#st_widget").val();a=a.replace(/stLight.options\({.*}\);/,'stLight.options({publisher:"'+b+'"'+getCopyNShare()+"});");$("#st_widget").val(a);checkCopyNShare()}function generateShareNow(){var b=$("#st_pkey").val();if(b==""){if($("#st_pkey_hidden").val()!=""){b=$("#st_pkey_hidden").val()}}var c="true";if($("#get4x").attr("checked")){c="false"}var a='<script charset="utf-8" type="text/javascript">var switchTo5x='+c+";<\/script>";a+='<script charset="utf-8" type="text/javascript" src="http://w.sharethis.com/button/buttons.js"><\/script>';a+='<script type="text/javascript">stLight.options({publisher:"'+b+'"'+getCopyNShare()+"});<\/script>";if($("#st_sharenow").attr("checked")){if($("#st_hoverbar").attr("checked")){$("#st_widget").val("");a+='<script charset="utf-8" type="text/javascript" src="http://s.sharethis.com/loader.js"><\/script>';$("#st_widget").val(a);defaultPosition="right";generateHoverbar(defaultPosition);a=$("#st_widget").val()}else{a+='<script charset="utf-8" type="text/javascript" src="http://s.sharethis.com/loader.js"><\/script>'}a+='<script charset="utf-8" type="text/javascript">var options={ "service": "facebook", "timer": { "countdown": 30, "interval": 10, "enable": false}, "frictionlessShare": false, "style": "3", publisher:"'+b+'"};var st_service_widget = new sharethis.widgets.serviceWidget(options);<\/script>';$("#st_widget").val(a);$.each($("ul#themeList").find("li"),function(d,e){if($(e).hasClass("selected")){updateShareNowStyle($(e).attr("data-value"))}})}else{if($("#st_hoverbar").attr("checked")){defaultPosition="left";generateHoverbar(defaultPosition)}else{var a='<script charset="utf-8" type="text/javascript" src="http://w.sharethis.com/button/buttons.js"><\/script>';a+='<script type="text/javascript">stLight.options({publisher:"'+b+'"'+getCopyNShare()+"});<\/script>";$("#st_widget").val(a)}}}function updateHoverBarServices(){if($("#st_hoverbar").attr("checked")){var a="left";if($("#st_sharenow").attr("checked")){a="right"}generateShareNow()}}String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};function generateHoverbar(h){if($(".services").is(":visible")){var b=$("#st_services").val();var a=b.split(",");var e=new Array();var g=0;for(var c=0;c<a.length;c++){if(a[c].trim()!="plusone"&&a[c].trim()!="fblike"){e[g]='"'+a[c].trim()+'"';g++}}b=e.join(",")}else{b=defaultServices}var d=$("#st_pkey").val();if(d==""){if($("#st_pkey_hidden").val()!=""){d=$("#st_pkey_hidden").val()}else{d=generatePublisherKey()}}var f="true";if($("#get4x").attr("checked")){f="false"}var j='<script charset="utf-8" type="text/javascript">var switchTo5x='+f+";<\/script>";j+='<script charset="utf-8" type="text/javascript" src="http://w.sharethis.com/button/buttons.js"><\/script>';j+='<script type="text/javascript">stLight.options({publisher:"'+d+'"'+getCopyNShare()+"});<\/script>";if($("#st_hoverbar").attr("checked")){if($("#st_sharenow").attr("checked")){h="right";j=$("#st_widget").val()}else{j+='<script charset="utf-8" type="text/javascript" src="http://s.sharethis.com/loader.js"><\/script>'}j+='<script charset="utf-8" type="text/javascript">var options={ publisher:"'+d+'", "position": "'+h+'", "chicklets": { "items": ['+b+"] } }; var st_hover_widget = new sharethis.widgets.hoverbuttons(options);<\/script>";$("#st_widget").val(j)}else{if($("#st_sharenow").attr("checked")){generateShareNow()}else{var j='<script charset="utf-8" type="text/javascript" src="http://w.sharethis.com/button/buttons.js"><\/script>';j+='<script type="text/javascript">stLight.options({publisher:"'+d+'"'+getCopyNShare()+"});<\/script>";$("#st_widget").val(j)}}}function updateShareNowStyle(b){var a=$("#st_widget").val();a=a.replace(/"style": "\d*"/,'"style": "'+b+'"');$("#st_widget").val(a)}function makeHeadTag(){var e=$("#st_pkey").val();var c=$("#st_widget").val();var d=new RegExp("(publisher:)('|\")(.*?)('|\")","gim");var a=c.replace(d,"$1$2"+e+"$4");$("#st_widget").val(a);checkCopyNShare()}function makeTags(){var d=$("#st_services").val();var e=$("#curr_type").html();svc=d.split(",");var b="";var f="displayText='share'";if(e=="chicklet2"){f=""}else{if(e=="classic"){b="<span class='st_sharethis' st_title='<?php the_title(); ?>' st_url='<?php the_permalink(); ?>' displayText='ShareThis'></span>";$("#st_tags").val(b);return true}}if(e=="chicklet"||e=="classic"){e=""}for(var c=0;c<svc.length;c++){if(svc[c].length>2){var a="";var g="";if(svc[c]=="twitter"){a=$("#st_via").val();g=$("#st_related").val();if(a!=""){a=" st_via='"+a+"'"}if(g!=""){g=" st_username='"+g+"'"}}if(e=="chicklet2"){b+="<span"+a+""+g+" class='st_"+svc[c]+"' st_title='<?php the_title(); ?>' st_url='<?php the_permalink(); ?>'></span>"}else{b+="<span"+a+""+g+" class='st_"+svc[c]+e+"' st_title='<?php the_title(); ?>' st_url='<?php the_permalink(); ?>' displayText='"+svc[c]+"'></span>"}}}$("#st_tags").val(b);updateHoverBarServices()}function carDoneCB(b,d){var c=d.getAttribute("st_type");$(".services").show();$(".fblikeplusone").show();if(c=="vcount"){$("#curr_type").html("_vcount");$("#st_current_type").val("_vcount");$("#currentType").html("<span class='type_name'>Vertical Count</span>")}else{if(c=="hcount"){$("#curr_type").html("_hcount");$("#st_current_type").val("_hcount");$("#currentType").html("<span class='type_name'>Horizontal Count</span>")}else{if(c=="buttons"){$("#curr_type").html("_buttons");$("#st_current_type").val("_buttons");$("#currentType").html("<span class='type_name'>Buttons</span>")}else{if(c=="large"){$("#curr_type").html("_large");$("#st_current_type").val("_large");$("#currentType").html("<span class='type_name'>Large Icons</span>")}else{if(c=="chicklet"){$("#curr_type").html("chicklet");$("#st_current_type").val("chicklet");$("#currentType").html("<span class='type_name'>Regular Buttons</span>")}else{if(c=="chicklet2"){$("#curr_type").html("chicklet2");$("#st_current_type").val("chicklet2");$("#currentType").html("<span class='type_name'>Regular Buttons No-Text</span>")}else{if(c=="sharethis"){$(".services").hide();$(".fblikeplusone").hide();$("#curr_type").html("classic");$("#st_current_type").val("classic");$("#currentType").html("<span class='type_name'>Classic</span>");updateHoverBarServices()}}}}}}}if(makeTagsEnabled==true){makeTags()}makeTagsEnabled=true}$(".versionItem").click(function(){$(".versionItem").removeClass("versionSelect");$(this).addClass("versionSelect")});var container=null;function createOverlay(){container=$('<div id="registratorCodeModal" class="registratorCodeModal"></div><div class="registratorModalWindowContainer"><div id="registratorModalWindow"></div></div>');$("body").append(container);var b=container.find("#registratorModalWindow");var a="<div class='registratorContainer'>";a+="<div onclick=javascript:container.remove(); class='registratorCloser'></div>";a+="<iframe height='390px' width='641px' src='http://sharethis.com/external-login' frameborder='0' />";b.append(a)}$(document).keydown(function(a){if(a.keyCode==27&&container!=null){container.remove()}});