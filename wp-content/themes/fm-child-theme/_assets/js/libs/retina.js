(function(){function a(g){this.path=g;var d=this.path.split("."),h=d.slice(0,d.length-1).join("."),f=d[d.length-1];this.at_2x_path=h+"@2x."+f}function c(d){this.el=d,this.path=new a(this.el.getAttribute("src"));var f=this;this.path.check_2x_variant(function(g){g&&f.swap()})}var b=typeof exports=="undefined"?window:exports;b.RetinaImagePath=a,a.confirmed_paths=[],a.prototype.is_external=function(){return !!this.path.match(/^https?\:/i)&&!this.path.match("//"+document.domain)},a.prototype.check_2x_variant=function(f){var g,d=this;if(this.is_external()){return f(!1)}if(this.at_2x_path in a.confirmed_paths){return f(!0)}g=new XMLHttpRequest,g.open("HEAD",this.at_2x_path),g.onreadystatechange=function(){return g.readyState!=4?f(!1):g.status>=200&&g.status<=399?(a.confirmed_paths.push(d.at_2x_path),f(!0)):f(!1)},g.send()},b.RetinaImage=c,c.prototype.swap=function(f){function g(){d.el.complete?(d.el.setAttribute("width",d.el.offsetWidth),d.el.setAttribute("height",d.el.offsetHeight),d.el.setAttribute("src",f)):setTimeout(g,5)}typeof f=="undefined"&&(f=this.path.at_2x_path);var d=this;g()},b.devicePixelRatio>1&&(window.onload=function(){var h=document.getElementsByTagName("img"),f=[],g,d;for(g=0;g<h.length;g++){d=h[g],f.push(new c(d))}})})();